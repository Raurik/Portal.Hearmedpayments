/* ============================================================
   HEARMED LAYOUT CSS v7.1 — HM-CONTENT CHAIN
   ============================================================

   Controls the height/overflow chain from Elementor wrappers
   down to #hm-app through .hm-content.

   NOTE:
   - hm-main is managed in Elementor only (no CSS ownership here).
   - This file only controls hm-content + post-content wrappers.
   ============================================================ */


/* ============================================================
   ELEMENTOR PAGE WRAPPER

   The .elementor div wraps all Elementor content on the page.
   It sits inside the WordPress theme wrappers (.site-main etc)
   which foundation.css locks to 100vh flex columns.
   This must grow to fill and pass the height down.
   ============================================================ */

body.hm-portal-page .elementor {
  flex: 1 1 auto !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Older Elementor versions wrap content in .elementor-inner
   and/or .elementor-section-wrap. Target both in case they exist. */
body.hm-portal-page .elementor > .elementor-inner,
body.hm-portal-page .elementor > .elementor-section-wrap {
  flex: 1 1 auto !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
}

/* Theme Builder templates use .elementor-location-content */
body.hm-portal-page .elementor-location-content {
  flex: 1 1 auto !important;
  min-height: 0 !important;
  display: flex !important;
  flex-direction: column !important;
}


/* ============================================================
   .hm-app-shell — outer app container

   Elementor .e-con with class .hm-app-shell. Contains the
   sidebar column + content column (and possibly topbar).
   Elementor sets display:flex on .e-con by default, so we
   only need to ensure it fills height and allows shrinking.
   We do NOT override flex-direction (Elementor may use row).
   ============================================================ */

body.hm-portal-page .hm-app-shell {
  flex: 1 1 auto !important;
  min-height: 0 !important;
}

body.hm-portal-page .hm-app-shell > .e-con-inner {
  min-height: 0 !important;
}


/* ============================================================
   .hm-content — content area inside Elementor hm-main

  hm-content is NOT the scroll owner.
  Scrolling is handled by Elementor hm-main.
   ============================================================ */

.hm-content {
  flex: 1 1 auto !important;
  height: 100% !important;
  min-height: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  overflow: visible !important;
  display: flex !important;
  flex-direction: column !important;
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
  box-shadow: none !important;
}

/* .e-con-inner inside .hm-content */
.hm-content > .e-con-inner {
  flex: 1 1 auto !important;
  height: 100% !important;
  min-height: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  display: flex !important;
  flex-direction: column !important;
  overflow: visible !important;
}


/* ============================================================
  Elementor widget wrappers INSIDE .hm-content

   Elementor wraps shortcode output in several nested divs:
   .elementor-element > .elementor-widget-wrap (optional in
   Container mode) > .elementor-widget-container.

  Each wrapper must allow content growth so .hm-content can scroll.
  Only targets wrappers INSIDE .hm-content — sidebar/topbar widgets
   are unaffected.
   ============================================================ */

.hm-content .elementor-element,
.hm-content .elementor-widget-wrap,
.hm-content .elementor-widget-theme-post-content,
.hm-content .elementor-widget-container {
  flex: 1 1 auto !important;
  height: 100% !important;
  min-height: 0 !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  overflow: visible !important;
  display: flex !important;
  flex-direction: column !important;
}

.hm-content .elementor-widget-container > * {
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
  align-self: stretch !important;
}

.hm-content .elementor-shortcode,
.hm-content .elementor-shortcode > * {
  display: flex !important;
  flex-direction: column !important;
  flex: 1 1 auto !important;
  height: 100% !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  min-height: 0 !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}


/* ============================================================
   #hm-app — content root only (no forced chrome)
   ============================================================ */

#hm-app {
  flex: 1 1 auto !important;
  height: 100% !important;
  min-height: 100% !important;
  width: 100% !important;
  max-width: 100% !important;
  min-width: 0 !important;
  margin: 0 !important;
  align-self: stretch !important;
  overflow: visible !important;
  background: transparent;
  border: none;
  border-radius: 0;
  box-shadow: none;
}


/* ============================================================
   END OF LAYOUT CSS
   ============================================================ */

/* ============================================================
   HM-MAIN SCROLLBAR SYSTEM (GLOBAL)
   ============================================================ */

.hm-main {
  -webkit-overflow-scrolling: touch;
  min-width: 0;
  min-height: 0;
  max-width: 98vw;
  max-height: 98vh;

  --hm-scroll-thumb: rgba(125, 211, 252, 0.95);
  --hm-scroll-thumb-h: rgba(56, 189, 248, 0.95);
  --hm-scroll-track: rgba(186, 230, 253, 0.24);
  --hm-scroll-width: 6px;

  scrollbar-width: thin;
  scrollbar-color: var(--hm-scroll-thumb) var(--hm-scroll-track);
}

.hm-app,
#hm-app {
  width: 100%;
  box-sizing: border-box;
  min-height: 0;
}

.hm-main::-webkit-scrollbar {
  width: var(--hm-scroll-width);
  height: var(--hm-scroll-width);
}

.hm-main::-webkit-scrollbar-track {
  background: var(--hm-scroll-track);
  border-radius: 999px;
  margin: 2px 0;
}

.hm-main::-webkit-scrollbar-thumb {
  background: var(--hm-scroll-thumb);
  border-radius: 999px;
  min-height: 22px;
  border: 1px solid transparent;
  background-clip: padding-box;
  box-shadow: inset 0 0 2px rgba(12, 74, 110, 0.18);
}

.hm-main::-webkit-scrollbar-thumb:hover,
.hm-main::-webkit-scrollbar-thumb:active,
.hm-main:focus-within::-webkit-scrollbar-thumb {
  background: var(--hm-scroll-thumb-h);
  box-shadow: inset 0 0 3px rgba(12, 74, 110, 0.22);
}

.hm-main::-webkit-scrollbar-button,
.hm-main::-webkit-scrollbar-button:vertical:decrement,
.hm-main::-webkit-scrollbar-button:vertical:increment {
  display: none !important;
  width: 0 !important;
  height: 0 !important;
  -webkit-appearance: none !important;
  background: transparent !important;
  border: 0 !important;
}

.hm-main::-webkit-scrollbar-corner { background: transparent; }

.hm-main:focus-within {
  outline: none;
}

.hm-main:focus-within::-webkit-scrollbar-thumb {
  box-shadow: 0 0 0 2px rgba(186, 230, 253, 0.35), inset 0 0 3px rgba(12, 74, 110, 0.22);
}

@media (max-width: 480px) {
  .hm-main { --hm-scroll-width: 5px; }
}
